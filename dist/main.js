(()=>{"use strict";const t=[];class a{constructor(a,r){this.ID=r,this.length=a,this.hits=0,this.sunk=!1,t.push(this)}hit(){this.hits<this.length&&(this.hits+=1),this.hits===this.length&&this.isSunk()}isSunk(){this.sunk=!0}}class r{constructor(){this.array=[[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "," "," "]],this.attackArray=[],this.sunkArray=[],this.allShipsSank=!1}placeShip(t,a,r){const e=t[0],i=t[1];if(!(a.length+e>10&&"Y"===r||a.length+i>10&&"X"===r))if("X"===r){for(let t=i;t<i+a.length;t++)if(!1===this.checkPlacement(e,t))return;for(let t=i;t<i+a.length;t++)this.array[e][t]=a.ID}else if("Y"===r){for(let t=e;t<e+a.length;t++)if(!1===this.checkPlacement(t,i))return;for(let t=e;t<e+a.length;t++)this.array[t][i]=a.ID}}checkPlacement(t,a){for(let r=t-1;r<t+2&&(void 0!==this.array[r]||(r++,void 0!==this.array[r]));r++)for(let t=a-1;t<a+2&&(void 0!==this.array[r][t]||(t++,void 0!==this.array[r][t]));t++)if(" "!==this.array[r][t])return!1;return!0}receiveAttack(a){for(let t=0;t<this.attackArray.length;t++)if(this.attackArray[t][0]===a[0]&&this.attackArray[t][1]===a[1])return;this.attackArray.push(a);const r=a[0],e=a[1];if(" "!==this.array[r][e]){const a=this.array[r][e];for(let r=0;r<t.length;r++)t[r].ID===a&&t[r].hit(),!0===t[r].sunk&&this.sunkArray.push(t[r])}else this.array[r][e]="X";this.sunkArray.length===t.length&&(this.allShipsSank=!0)}}class e{constructor(t){this.name=t,this.gameBoard=new r,this.attackArray=[]}attack(){const t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());for(let r=0;r<this.attackArray.length;r++)if(this.attackArray[r][0]===t&&this.attackArray[r][1]===a)return void this.attack();this.attackArray.push([t,a])}}const i=new e,s=new e;i.carrier=new a(5,"C"),i.battleship=new a(4,"B"),i.destroyer=new a(3,"D"),i.submarine=new a(3,"S"),i.patrolBoat=new a(2,"P"),s.carrier=new a(5,"C"),s.battleship=new a(4,"B"),s.destroyer=new a(3,"D"),s.submarine=new a(3,"S"),s.patrolBoat=new a(2,"P"),i.gameBoard.placeShip([6,5],i.carrier,"X"),i.gameBoard.placeShip([1,3],i.battleship,"Y"),i.gameBoard.placeShip([7,2],i.destroyer,"Y"),i.gameBoard.placeShip([2,5],i.submarine,"X"),i.gameBoard.placeShip([0,1],i.patrolBoat,"Y"),s.gameBoard.placeShip([0,6],s.carrier,"Y"),s.gameBoard.placeShip([6,8],s.battleship,"Y"),s.gameBoard.placeShip([3,0],s.destroyer,"X"),s.gameBoard.placeShip([6,2],s.submarine,"X"),s.gameBoard.placeShip([0,1],s.patrolBoat,"Y"),function(){const t=[];document.querySelectorAll(".your-board > div").forEach((a=>{a.querySelectorAll("div").forEach((a=>{t.push(a.id)}))}));for(let a=0;a<i.gameBoard.array.length;a++)for(let r=0;r<i.gameBoard.array[a].length;r++)if(" "!==i.gameBoard.array[a][r]){let e=Number(a.toString()+r.toString());e=t[e],document.querySelector(`#${e}`).classList.add("ship")}}(),document.querySelectorAll(".enemy-board > div").forEach((t=>{t.querySelectorAll("div").forEach((t=>{t.addEventListener("click",(()=>{const a=t.id.slice(3,4),r=t.id.slice(5);console.log(t.id),console.log(a),console.log(r)," "!==s.gameBoard.array[a][r]?t.classList.add("hit"):t.classList.add("miss")}))}))}))})();